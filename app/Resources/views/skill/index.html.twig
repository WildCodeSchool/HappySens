{% extends 'baseIn.html.twig' %}

{% block content %}
    <h1 class="center">Listes des Talents</h1>
{#    <div class="row">
        {% for skill in skills %}
            <div class="col s12 m6 l3">
                <div class="card blue-grey darken-1">
                    <div class="card-content white-text">
                        <span class="card-title">{{ skill.nameSkill }}</span>
                        <p>Nombre de salarié :
                            {% set numberOfSalary = 0  %}
                            {% for salarySkill in nbSalaryBySkill %}
                                {% if salarySkill.id == skill.id %}
                                    {{ numberOfSalary + salarySkill.nbUser  }}
                                    {% set skill = salarySkill %}
                                    ({{ include('skill/skillLevel.html.twig') }})
                                {% endif %}
                            {% endfor %}</p>
                        <p>Nombre d'HappyCoach :
                            {% for skillHappyCoach in nbHappyCoachBySkill %}
                                {% if skillHappyCoach.id == skill.id %}
                                    {{ skillHappyCoach.nbUser | default('0') }}
                                    / niveau moyen : {{ skillHappyCoach.level |  round(1)}}
                                {% endif %}
                            {% endfor %}
                        </p>
                    </div>
                    <div class="card-action">
                        <a href="{{ path('skills_edit', { 'id': skill.id }) }}">modifier le talent</a>
                    </div>
                </div>
            </div>
        {% endfor %}
    </div>#}
    <div class="row">
        {% for skill in skills %}
            <div class="col s12 m6 l3">
                <div class="card  grey lighten-2">
                    <div class="card-content blue-text text-darken-3">
                        <span class="card-title black-text">{{ skill.nameSkill | upper }}</span>
                        <p>Nombre de salarié :
                            {% if skill.collaborator is empty %}
                                0
                            {% else %}
                                {{ skill.collaborator.0.nbUser }}
                                <span class="right">niveau : {{ skill.collaborator.0.level | round(1) }}</span>
                            {% endif %}
                        <p>Nombre d'HappyCoach :
                            {% if skill.happyCoach is null %}
                            0
                            {% else%}
                             {{ skill.happyCoach.0.nbUser  }}
                                <span class="right">niveau : {{  skill.happyCoach.0.level | round(1)}}</span>
                        {% endif %}
                        </p>
                        <p>Nombre de projet :
                            {% if skill.project is empty %}
                                0
                            {% else%}
                                {{ skill.project.0.nbProject }}
                            {% endif %}
                        </p>
                    </div>
                    <div class="card-action">
                        <a class="pink-text text-darken-2" href="{{ path('skills_show', { 'id': skill.id }) }}">voir le talent</a>
                        <a class="pink-text text-darken-2 right" href="{{ path('skills_edit', { 'id': skill.id }) }}">modifier le talent</a>
                    </div>
                </div>
            </div>
        {% endfor %}
    </div>
    <ul class="center">
        <li>
            <a href="{{ path('skills_new') }}">Ajouter un Talent</a>
        </li>
    </ul>
{% endblock %}
